import{p as A,I as G,q as Ve,b as j,g as F,z as B,W as L,t as Ce,h as P,j as x,k as O,n as R,v as V,X as xe,Y as ke,Z as te,x as _,A as ge,F as H,i as m,_ as he,R as I,P as qe,$ as pe,s as W,l as p,a0 as T,a1 as N,J,K as h,L as U,M as C,N as z,C as E,U as $,V as ae,a2 as le,w as we,a3 as Ie,T as ze,S as Se}from"./index-CeL4bcLB.js";import{d as Ue,q as Ae,R as X,V as ne,c as Be,D as _e,E as $e,w as oe,F as Fe,v as Pe,G as Qe,z as S,x as se,_ as De,y as Re,B as Ee,C as Te}from"./_plugin-vue_export-helper-l3zcP0kf.js";import{c as Ge,u as Ne,d as Y,f as ie,m as Me,b as M,e as je,g as Le}from"./VTextField-OVYQ3qTC.js";import{V as ue}from"./VAlert-2CFT-IG1.js";const re=Symbol.for("vuetify:selection-control-group"),de=A({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:G,trueIcon:G,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ue},...j(),...Ae(),...Ve()},"SelectionControlGroup"),Oe=A({...de({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");F()({name:"VSelectionControlGroup",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:i}=r;const n=B(e,"modelValue"),s=L(),d=V(()=>e.id||`v-selection-control-group-${s}`),o=V(()=>e.name||d.value),l=new Set;return xe(re,{modelValue:n,forceUpdate:()=>{l.forEach(u=>u())},onForceUpdate:u=>{l.add(u),ke(()=>{l.delete(u)})}}),Ce({[e.defaultsTarget]:{color:V(()=>e.color),disabled:V(()=>e.disabled),density:V(()=>e.density),error:V(()=>e.error),inline:V(()=>e.inline),modelValue:n,multiple:V(()=>!!e.multiple||e.multiple==null&&Array.isArray(n.value)),name:o,falseIcon:V(()=>e.falseIcon),trueIcon:V(()=>e.trueIcon),readonly:V(()=>e.readonly),ripple:V(()=>e.ripple),type:V(()=>e.type),valueComparator:V(()=>e.valueComparator)}}),P(()=>x("div",{class:R(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:O(e.style),role:e.type==="radio"?"radiogroup":void 0},[i.default?.()])),{}}});const ce=A({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...j(),...de()},"VSelectionControl");function He(e){const r=he(re,void 0),{densityClasses:i}=Be(e),n=B(e,"modelValue"),s=p(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),d=p(()=>e.falseValue!==void 0?e.falseValue:!1),o=p(()=>!!e.multiple||e.multiple==null&&Array.isArray(n.value)),l=p({get(){const v=r?r.modelValue.value:n.value;return o.value?T(v).some(a=>e.valueComparator(a,s.value)):e.valueComparator(v,s.value)},set(v){if(e.readonly)return;const a=v?s.value:d.value;let t=a;o.value&&(t=v?[...T(n.value),a]:T(n.value).filter(f=>!e.valueComparator(f,s.value))),r?r.modelValue.value=t:n.value=t}}),{textColorClasses:u,textColorStyles:b}=_e(()=>{if(!(e.error||e.disabled))return l.value?e.color:e.baseColor}),{backgroundColorClasses:y,backgroundColorStyles:k}=$e(()=>l.value&&!e.error&&!e.disabled?e.color:e.baseColor),c=p(()=>l.value?e.trueIcon:e.falseIcon);return{group:r,densityClasses:i,trueValue:s,falseValue:d,model:l,textColorClasses:u,textColorStyles:b,backgroundColorClasses:y,backgroundColorStyles:k,icon:c}}const Z=F()({name:"VSelectionControl",directives:{vRipple:X},inheritAttrs:!1,props:ce(),emits:{"update:modelValue":e=>!0},setup(e,r){let{attrs:i,slots:n}=r;const{group:s,densityClasses:d,icon:o,model:l,textColorClasses:u,textColorStyles:b,backgroundColorClasses:y,backgroundColorStyles:k,trueValue:c}=He(e),v=L(),a=W(!1),t=W(!1),f=I(),g=V(()=>e.id||`input-${v}`),w=V(()=>!e.disabled&&!e.readonly);s?.onForceUpdate(()=>{f.value&&(f.value.checked=l.value)});function Q(q){w.value&&(a.value=!0,pe(q.target,":focus-visible")!==!1&&(t.value=!0))}function D(){a.value=!1,t.value=!1}function ve(q){q.stopPropagation()}function fe(q){if(!w.value){f.value&&(f.value.checked=l.value);return}e.readonly&&s&&qe(()=>s.forceUpdate()),l.value=q.target.checked}return P(()=>{const q=n.label?n.label({label:e.label,props:{for:g.value}}):e.label,[be,ye]=te(i),K=x("input",_({ref:f,checked:l.value,disabled:!!e.disabled,id:g.value,onBlur:D,onFocus:Q,onInput:fe,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:c.value,name:e.name,"aria-checked":e.type==="checkbox"?l.value:void 0},ye),null);return x("div",_({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":a.value,"v-selection-control--focus-visible":t.value,"v-selection-control--inline":e.inline},d.value,e.class]},be,{style:e.style}),[x("div",{class:R(["v-selection-control__wrapper",u.value]),style:O(b.value)},[n.default?.({backgroundColorClasses:y,backgroundColorStyles:k}),ge(x("div",{class:R(["v-selection-control__input"])},[n.input?.({model:l,textColorClasses:u,textColorStyles:b,backgroundColorClasses:y,backgroundColorStyles:k,inputNode:K,icon:o.value,props:{onFocus:Q,onBlur:D,id:g.value}})??x(H,null,[o.value&&m(ne,{key:"icon",icon:o.value},null),K])]),[[X,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),q&&m(Ge,{for:g.value,onClick:ve},{default:()=>[q]})])}),{isFocused:a,input:f}}}),me=A({indeterminate:Boolean,indeterminateIcon:{type:G,default:"$checkboxIndeterminate"},...ce({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),ee=F()({name:"VCheckboxBtn",props:me(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,r){let{slots:i}=r;const n=B(e,"indeterminate"),s=B(e,"modelValue");function d(u){n.value&&(n.value=!1)}const o=V(()=>n.value?e.indeterminateIcon:e.falseIcon),l=V(()=>n.value?e.indeterminateIcon:e.trueIcon);return P(()=>{const u=N(Z.filterProps(e),["modelValue"]);return m(Z,_(u,{modelValue:s.value,"onUpdate:modelValue":[b=>s.value=b,d],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:l.value,"aria-checked":n.value?"mixed":void 0}),i)}),{}}}),Je=A({...N(Me(),["direction"]),...N(me(),["inline"])},"VCheckbox"),Ke=F()({name:"VCheckbox",inheritAttrs:!1,props:Je(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,r){let{attrs:i,slots:n}=r;const s=B(e,"modelValue"),{isFocused:d,focus:o,blur:l}=Ne(e),u=I(),b=L();return P(()=>{const[y,k]=te(i),c=Y.filterProps(e),v=ee.filterProps(e);return m(Y,_({ref:u,class:["v-checkbox",e.class]},y,c,{modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,id:e.id||`checkbox-${b}`,focused:d.value,style:e.style}),{...n,default:a=>{let{id:t,messagesId:f,isDisabled:g,isReadonly:w,isValid:Q}=a;return m(ee,_(v,{id:t.value,"aria-describedby":f.value,disabled:g.value,readonly:w.value},k,{error:Q.value===!1,modelValue:s.value,"onUpdate:modelValue":D=>s.value=D,onFocus:o,onBlur:l}),n)}})}),ie({},u)}}),We={class:"text-body-1 font-weight-bold text-on-secondary"},Xe=J({__name:"QuestionEditor",props:{question:{},index:{}},emits:["update:question"],setup(e,{emit:r}){const i=e,n=r,s=p(()=>i.question.answers.some(c=>c.isCorrect)),d=p(()=>i.question.text?"":"Question text is required");function o(c){n("update:question",{...i.question,...c})}function l(c){o({text:c})}function u(c,v){const a=i.question.answers.map((t,f)=>f===c?{...t,text:v}:t);o({answers:a})}function b(c){const v=i.question.answers.map((a,t)=>({...a,isCorrect:t===c}));o({answers:v})}function y(){const c=[...i.question.answers,{id:crypto.randomUUID(),text:"",isCorrect:!1}];o({answers:c})}function k(c){const v=i.question.answers.filter((a,t)=>t!==c);o({answers:v})}return(c,v)=>(h(),U(oe,{class:"question-editor",elevation:"0"},{default:C(()=>[m(Qe,{class:"pb-0"},{prepend:C(()=>[m(Pe,{color:"secondary",size:"40",variant:"flat"},{default:C(()=>[x("span",We,E(e.index+1),1)]),_:1})]),default:C(()=>[m(Fe,{class:"text-subtitle-1 font-weight-bold"},{default:C(()=>[z(" Question "+E(e.index+1),1)]),_:1})]),_:1}),m(se,{class:"pt-4"},{default:C(()=>[m(M,{"data-testid":"question-text","error-messages":d.value,label:"Question text","model-value":e.question.text,variant:"filled","onUpdate:modelValue":l},null,8,["error-messages","model-value"]),(h(!0),$(H,null,ae(e.question.answers,(a,t)=>(h(),$("div",{key:a.id,class:"d-flex align-center ga-3 mb-3"},[m(Ke,{color:"success","data-testid":`correct-toggle-${t}`,density:"compact","hide-details":"","model-value":a.isCorrect,"onUpdate:modelValue":f=>b(t)},null,8,["data-testid","model-value","onUpdate:modelValue"]),m(M,{"data-testid":`answer-text-${t}`,density:"comfortable","hide-details":"",label:`Answer ${t+1}`,"model-value":a.text,variant:"filled","onUpdate:modelValue":f=>u(t,f)},null,8,["data-testid","label","model-value","onUpdate:modelValue"]),m(S,{"aria-label":`Remove answer ${t+1}`,color:"error","data-testid":`remove-answer-${t}`,disabled:e.question.answers.length<=2,icon:"mdi-close",size:"small",variant:"text",onClick:f=>k(t)},null,8,["aria-label","data-testid","disabled","onClick"])]))),128)),s.value?le("",!0):(h(),U(ue,{key:0,class:"mt-2",density:"compact",type:"warning",variant:"tonal"},{default:C(()=>[...v[0]||(v[0]=[z(" Mark one answer as correct ",-1)])]),_:1})),m(S,{class:"mt-3",color:"primary","data-testid":"add-answer-btn",disabled:e.question.answers.length>=4,"prepend-icon":"mdi-plus",size:"small",variant:"tonal",onClick:y},{default:C(()=>[...v[1]||(v[1]=[z(" Add answer ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),Ye=De(Xe,[["__scopeId","data-v-460d78ea"]]),Ze=A({...j(),...Le()},"VForm"),et=F()({name:"VForm",props:Ze(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,r){let{slots:i,emit:n}=r;const s=je(e),d=I();function o(u){u.preventDefault(),s.reset()}function l(u){const b=u,y=s.validate();b.then=y.then.bind(y),b.catch=y.catch.bind(y),b.finally=y.finally.bind(y),n("submit",b),b.defaultPrevented||y.then(k=>{let{valid:c}=k;c&&d.value?.submit()}),b.preventDefault()}return P(()=>x("form",{ref:d,class:R(["v-form",e.class]),style:O(e.style),novalidate:!0,onReset:o,onSubmit:l},[i.default?.(s)])),ie(s,d)}}),tt={class:"d-flex justify-end mt-2"},at={class:"d-flex align-center mb-6"},lt=J({__name:"QuizForm",props:{quiz:{}},emits:["save"],setup(e,{emit:r}){const i=e,n=r;function s(){return{id:crypto.randomUUID(),text:"",answers:[{id:crypto.randomUUID(),text:"",isCorrect:!1},{id:crypto.randomUUID(),text:"",isCorrect:!0}]}}const d=I(i.quiz?.title??""),o=I(i.quiz?.questions.map(a=>({...a}))??[s()]),l=I(""),u=I("");we(()=>i.quiz,a=>{a&&(d.value=a.title,o.value=a.questions.map(t=>({...t})))});function b(a,t){o.value[a]=t}function y(){o.value.push(s())}function k(a){o.value.splice(a,1)}function c(){if(l.value="",u.value="",!d.value.trim())return u.value="Quiz title is required",l.value="Quiz title is required",!1;for(const a of o.value){if(!a.text.trim())return l.value="Each question must have text",!1;if(!a.answers.some(t=>t.isCorrect))return l.value="Each question must have a correct answer",!1}return!0}function v(){if(!c())return;const a={id:i.quiz?.id??crypto.randomUUID(),title:d.value,questions:o.value,createdAt:i.quiz?.createdAt??new Date,updatedAt:new Date};n("save",a)}return(a,t)=>(h(),U(et,{class:"quiz-form",onSubmit:Ie(v,["prevent"])},{default:C(()=>[m(M,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=f=>d.value=f),class:"mb-2","data-testid":"quiz-title",density:"comfortable","error-messages":u.value,label:"Quiz title","prepend-inner-icon":"mdi-pencil-outline",variant:"filled"},null,8,["modelValue","error-messages"]),(h(!0),$(H,null,ae(o.value,(f,g)=>(h(),$("div",{key:f.id,class:"mb-5"},[m(Ye,{"data-testid":`question-editor-${g}`,index:g,question:f,"onUpdate:question":w=>b(g,w)},null,8,["data-testid","index","question","onUpdate:question"]),x("div",tt,[m(S,{color:"error","data-testid":`remove-question-${g}`,disabled:o.value.length<=1,"prepend-icon":"mdi-close",size:"small",variant:"text",onClick:w=>k(g)},{default:C(()=>[...t[1]||(t[1]=[z(" Remove question ",-1)])]),_:1},8,["data-testid","disabled","onClick"])])]))),128)),x("div",at,[m(S,{color:"primary","data-testid":"add-question-btn","prepend-icon":"mdi-plus",variant:"tonal",onClick:y},{default:C(()=>[...t[2]||(t[2]=[z(" Add question ",-1)])]),_:1})]),l.value?(h(),U(ue,{key:0,class:"mb-4",density:"compact",type:"error",variant:"tonal"},{default:C(()=>[z(E(l.value),1)]),_:1})):le("",!0),m(Re,{class:"mb-6"}),m(S,{color:"secondary","data-testid":"save-btn","prepend-icon":"mdi-content-save",size:"large",variant:"flat",onClick:v},{default:C(()=>[...t[3]||(t[3]=[z(" Save quiz ",-1)])]),_:1})]),_:1}))}}),nt={class:"d-flex align-center ga-2 mb-6"},ot={class:"text-h4 font-weight-bold"},st={key:0,class:"text-center py-12"},ct=J({__name:"QuizEditorView",props:{id:{}},setup(e){const r=e,i=Se(),n=Ee(),s=p(()=>r.id?n.getQuizById(r.id):void 0);function d(o){r.id&&n.getQuizById(r.id)?n.updateQuiz(o):n.addQuiz(o),i.push({name:"quiz-list"})}return(o,l)=>(h(),U(Te,{class:"quiz-editor-view",style:{"max-width":"800px"}},{default:C(()=>[x("div",nt,[m(S,{"aria-label":"Back to quiz list",color:"primary","data-testid":"back-btn",icon:"mdi-arrow-left",variant:"text",onClick:l[0]||(l[0]=u=>ze(i).push({name:"quiz-list"}))}),x("h1",ot,E(e.id?"Edit Quiz":"New Quiz"),1)]),e.id&&!s.value?(h(),$("div",st,[m(ne,{class:"mb-4",color:"warning",icon:"mdi-alert-circle-outline",size:"64"}),l[1]||(l[1]=x("div",{class:"text-h6"},"Quiz not found",-1))])):(h(),U(oe,{key:1,elevation:"2"},{default:C(()=>[m(se,{class:"pa-8"},{default:C(()=>[m(lt,{"data-testid":"quiz-form",quiz:s.value,onSave:d},null,8,["quiz"])]),_:1})]),_:1}))]),_:1}))}});export{ct as default};
